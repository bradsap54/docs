---
title: "Installation"
sidebarTitle: "Installation"
---

# Prerequisites

- Fresh machine with Ubuntu 24.04 LTS (other Linux OS may work as well, but not tested). We do not recommend using machines that have other services running except you understand what you are doing.
- System Requirements:
- Broadband internet connections

|                                                                                         | **CPU** | **RAM**<br />**(GB)** | **Storage**<br />**(GB)** | **Remarks**                     |
| --------------------------------------------------------------------------------------- | :-----: | :-------------------: | :-----------------------: | :-----------------------------: |
| **Minimum Requirements**<br />_For trial deployments_                                   | 4       | 8                     | 50                        | Swap memory activation required |
| **Standard Requirements**<br />_For production environments and continuous development_ | 8       | 12                    | 100                       | No need swap memory             |

# Installation Steps

First, you need to clone the repository:

```
git clone https://github.com/sguresearcher/nusantara.git
```

Move to the directory and execute the installation script:

```
cd nusantara
chmod +x setup.sh
./setup.sh
```

To install the main T-Guard components, you need to install from step 1 to step 4, in Figure 1.

<Frame caption="Figure 1. T-Guard Installer Main Menu">
  ![Main Menu Pn](/images/main-menu.png)
</Frame>

## **Step 1: Update System and Install Prerequisites**

In the **Main Menu**, type ‘**1**’ and press Enter.

This will update existing packages, install all necessary dependencies, and set up Docker.

Wait for the process to complete and it will then return to the **Main Menu**.

## **Step 2: Install T-Guard SOC Package**

In the **Main Menu**, type ‘**2**’ and press Enter.

You’ll see a menu to choose the current network environment of your system for installing T-Guard, as shown in Figure 2.

<Frame caption="FIgure 2. Network Environtment Options">
  <img
    src="/images/network-env-choice.png"
    alt="Network Env Choice Pn"
    title="Network Env Choice Pn"
    style={{ width:"100%" }}
  />
</Frame>

If you are using a local virtual machine, such as VirtualBox or VMware, choose option ‘**1**’.

If you are using a cloud-based virtual machine, such as Google Cloud Platform (GCP), Amazon Web Services (AWS), or Microsoft Azure, choose option ‘**2**’.

The installation process will start sequentially, beginning with Wazuh (include deploy initial wazuh agent), followed by Shuffle, IRIS, and MISP, as shown in Figure 3, 4, 5, and 6, respectively.

<Frame caption="Figure 3. Wazuh Installation">
  ![Wazuh Inst Pn](/images/wazuh-inst.png)

  ![Wazuh Inst 2 Pn](/images/wazuh-inst-2.png)
</Frame>

<Frame caption="Figure 4. Shuffle Installation">
  ![Shuffle Inst Pn](/images/shuffle-inst.png)
</Frame>

<Frame caption="Figure 5. IRIS-DFIR Instalation">
  ![Iris Inst Pn](/images/iris-inst.png)
</Frame>

<Frame caption="Figure 6. MISP Installation">
  ![Misp Inst Pn](/images/misp-inst.png)
</Frame>

Once the process is complete, a table will appear displaying dashboard access details and credentials for each module, as shown in Figure 7.

<Frame caption="Figure 7. Dashboard Access and Default Credentials">
  ![Dashboard Pn](/images/dashboard.png)
</Frame>

Open your browser and follow the link to access your dashboard.

<Frame caption="Figure 8. Warning Page">
  ![Image(4) Pn](/images/image\(4\).png)
</Frame>

You will see a warning from the browser that the certificate is invalid as illustrated in Figure 8. This is normal because we haven’t installed the signed SSL certificate, which is recommended for production. For now, just click proceed.

The first page of Wazuh should be as illustrated in Figure 9.

<Frame caption="Figure 9. Wazuh Login Page">
  ![Image(2) Avi](/images/image\(2\).avif)
</Frame>

Log in using **above mentioned credentials**. After log in, you should see Figure 10.

<Frame caption="Figure 10. Wazuh Dashboard">
  ![Image(5) Pn](/images/image\(5\).png)
</Frame>

Next, open Shuffle dashboard.

Create administrator account using \*\*above mentioned credentials \*\*and then login using the same credentials. After logged in, you should see Figure 11.

<Frame caption="Figure 11. Shuffle Dashboard">
  ![Image(6) Pn](/images/image\(6\).png)
</Frame>

Next, open IRIS dashboard.

Sign in using **above mentioned credentials**. After logged in, you should see Figure 12.

<Frame caption="Figure 12. IRIS Dashboard">
  ![Image(3) Avi](/images/image\(3\).avif)
</Frame>

Next, open MISP dashboard.

Sign in using **above mentioned credentials**. After logged in, you should see Figure 13.

<Frame caption="Figure 13. MISP Dashboard">
  ![Image(7) Pn](/images/image\(7\).png)
</Frame>

### **Credential Summary – T-Guard Modules**

| **Service** | **Web Interface**   | **Username**                                | **Password**           |
| ----------- | ------------------- | ------------------------------------------- | ---------------------- |
| Wazuh       | https://\<ip\>      | admin                                       | SecretPassword         |
| DFIR-IRIS   | https://\<ip\>:8443 | administrator                               | MySuperAdminPassword\! |
| Shuffle     | http://\<ip\>:3001  | administrator                               | MySuperAdminPassword\! |
| MISP        | https://\<ip\>:1443 | [admin@admin.test](mailto:admin@admin.test) | admin                  |

# Integration Steps

In the **Main Menu**, type ‘**3**’ and press Enter.

The system will prompt you to enter the IRIS API key, as shown in Figure 14.

<Frame caption="Figure 14. Input API KEY">
  ![Image(7) Pn](/iris-wazuh-int.png)
</Frame>

To obtain it, navigate to the IRIS page, select the Administrator profile, then go to My Settings.

<img
  src="/images/image.png"
  alt="image.png"
  title="image.png"
  className="mx-auto"
  style={{ width:"41%" }}
/>

The API key will be displayed.

![Satu Pn](/images/satu.png)

Copy and paste it to the installation, then press **Enter**. Wait until the process is finished.

You’ll be prompted to enter your VirusTotal API key.

<img
  src="/images/virustotalapi.png"
  alt="Virustotalapi Pn"
  title="Virustotalapi Pn"
  style={{ width:"68%" }}
/>

If you don’t have a VirusTotal account yet, please create one first in following URL:\
[https://www.virustotal.com/](https://www.virustotal.com/gui/home/upload)

If you already have an account, log in, click your profile name, and select ‘API Key’ to view it.

<img
  src="/virus-total.png"
  alt="image.png"
  title="image.png"
  className="mx-auto"
  style={{ width:"37%" }}
/>

Copy and paste it to the installation, then press **Enter**. Wait until the process is finished.

You’ll be prompted to enter your Shuffle Webhook URL. 

<img
  src="/images/webhook4.png"
  alt="Webhook4 Pn"
  title="Webhook4 Pn"
  style={{ width:"49%" }}
/>

To obtain the URL, follow the instructions below.

- Go to your Shuffle dashboard.
- Select **Experienced**.
- Select **New Workflow**.
- Specify your preferred **workflow name**—for example, test. \> select **Done**.
- In the left panel, select **Trigger** tab, then drag the **Webhook **to the middle panel as illustrated below.

  ![Webhook Pn](/images/webhook.png)
- Click on **Webhook** module, then it will show up the configuration panel on the right.
  - In the "Webhook URL" parameter, manually copy the URL by **highlighting it until the end of the url**, then press **Ctrl\+C**.

![Webhook5 Pn](/images/webhook5.png)

- Paste it to the installation terminal, then press **Enter**. Wait until the process is finished.
- Go back to the Shuffle, click the **Start **button as illustrated below.

![Webhook6 Pn](/images/webhook6.png)

- Next, select the **Shuffle **module in the middle panel, then it will show up the configuration panel on the right.
  - In the "Find Actions" parameter, make sure to select '**Repeat back to me**'.
  - In the "Call" parameter, change the value to `$exec`, then click the **Save** button, as illustrated below.

  ![Webhook7 Pn](/images/webhook7.png)

Click the **Test Execution** button (play icon). 

<img
  src="/images/play.png"
  alt="Play Pn"
  title="Play Pn"
  className="mx-auto"
  style={{ width:"20%" }}
/>

Select **Run Anyway**.

<img
  src="/images/run-anyway.png"
  alt="Run Anyway Pn"
  title="Run Anyway Pn"
  className="mx-auto"
  style={{ width:"80%" }}
/>

It will show the All Workflow Runs, just select one of it. We can see that the Shuffle already receive the alert from Wazuh as illustrated in Figure 16.

![Enam Pn](/images/enam.png)

Next, on the left panel, select Apps tab, type "IRIS" in the Search Active Apps bar. Click IRIS module (not IRIS V2), and wait until the IRIS v2 is show up. Then drag it to the middle panel as illustrated in Figure 17.

![Tujuh Avi](/images/tujuh.avif)

Click IRIS Module, then fill the following parameters:

- Find Actions: **Add a new case**
- Apikey: (insert your IRIS API Key)
- Url: (your IRIS url)

![Delapan Pn](/images/delapan.png)

Next, scroll down to the Body parameter, and click the Expand Window button. Change the body content with the following:

```
{  
"case_customer": "1",  
"case_description": "Test from Shuffle",
"case_name": "$change_me.title",
"case_soc_id": "123",
}
```

Then, click Try It button on the top right. Wait until the result is show up in the bottom. After that, click Submit button on the bottom right.

![Sembilan Pn](/images/sembilan.png)

Then, click Save button.

Go to Show Executions button again, then click Refresh button as illustrated in Figure 20.

![Sepuluh Pn](/images/sepuluh.png)

It should be exist the IRIS process. Inside the IRIS module, the Status value should be 200, means that the automation of ticket creation is success, as illustrated in Figure 21.

![Sebelas Pn](/images/sebelas.png)

We can also check in the IRIS page (**https://\<your_ip\>:8443**), select Manage Case tab on the left panel. We can see the ticket created from Shuffle exists.

![Duabelas Avi](/images/duabelas.avif)

We have several use case that can be used and described in the next page.

# Use Case

## **Use Case 1: Malware Detection and Auto-Response**

Execute step 12.

Open your Wazuh page (**https://\<your_ip\>**).

It would be appear an event about VirusTotal detect the malware, the deletion of the file, and the activated response regarding to the malware, illustrated in Figure 23.

![Zero Avi](/images/zero.avif)

We can also check in the IRIS to see the ticket that automatic created

![One Pn](/images/one.png)

## **Use Case 2: Web Defacement Detection**

Execute step 13.

Before simulate the web defacement, open the given link (**http://\<your_ip\>:3000**) in your browser. It will direct you to the example website that created by the script.

![Two Pn](/images/two.png)

Then, start the web defacement. It will change the website appearance.

![Three Pn](/images/three.png)

We can see in the Wazuh for the detection of file content changes. The rule id is 550 with the description is Integrity Checksum Changed.

![Four Pn](/images/four.png)