---
title: "Installation"
sidebarTitle: "Installation"
---

# Prerequisites

- Fresh machine with Ubuntu 24.04 LTS (other Linux OS may work as well, but not tested). We do not recommend using machines that have other services running except you understand what you are doing.
- System Requirements:
- Broadband internet connections

|                                                                                         | **CPU** | **RAM**<br />**(GB)** | **Storage**<br />**(GB)** | **Remarks**                     |
| --------------------------------------------------------------------------------------- | :-----: | :-------------------: | :-----------------------: | :-----------------------------: |
| **Minimum Requirements**<br />_For trial deployments_                                   | 8       | 16                    | 100                       | Swap memory activation required |
| **Standard Requirements**<br />_For production environments and continuous development_ | 8       | 32                    | 250                       | No need swap memory             |

# Installation Steps

First, you need to clone the repository:

```
git clone https://github.com/sguresearcher/nusantara.git
```

Move to the directory and execute the installation script:

```
cd nusantara
chmod +x setup.sh
./setup.sh
```

To install the main T-Guard components, follow instructions below.

<Frame caption="Figure 1. T-Guard Installer Main Menu">
  ![Main Menu Pn](/images/main-menu.png)
</Frame>

## **Step 1: Update System and Install Prerequisites**

In the **Main Menu**, type ‘**1**’ and press Enter.

This will update existing packages, install all necessary dependencies, and set up Docker.

Wait for the process to complete and it will then return to the **Main Menu**.

## **Step 2: Install T-Guard SOC Package**

In the **Main Menu**, type ‘**2**’ and press Enter.

You’ll see a menu to choose the current network environment of your system for installing T-Guard, as shown in Figure 2.

<Frame caption="FIgure 2. Network Environtment Options">
  <img
    src="/images/network-env-choice.png"
    alt="Network Env Choice Pn"
    title="Network Env Choice Pn"
    style={{ width:"100%" }}
  />
</Frame>

If you are using a local virtual machine, such as VirtualBox or VMware, choose option ‘**1**’.

If you are using a cloud-based virtual machine, such as Google Cloud Platform (GCP), Amazon Web Services (AWS), or Microsoft Azure, choose option ‘**2**’.

The installation process will start sequentially, beginning with Wazuh (include deploy initial wazuh agent), followed by Shuffle, IRIS, and MISP, as shown in Figure 3, 4, 5, and 6, respectively.

<Frame caption="Figure 3. Wazuh Installation">
  ![Wazuh Inst Pn](/images/wazuh-inst.png)

  ![Wazuh Inst 2 Pn](/images/wazuh-inst-2.png)
</Frame>

<Frame caption="Figure 4. Shuffle Installation">
  ![Shuffle Inst Pn](/images/shuffle-inst.png)
</Frame>

<Frame caption="Figure 5. IRIS-DFIR Instalation">
  ![Iris Inst Pn](/images/iris-inst.png)
</Frame>

<Frame caption="Figure 6. MISP Installation">
  ![Misp Inst Pn](/images/misp-inst.png)
</Frame>

Once the process is complete, a table will appear displaying dashboard access details and credentials for each module, as shown in Figure 7.

<Frame caption="Figure 7. Dashboard Access and Default Credentials">
  ![Dashboard Pn](/images/dashboard.png)
</Frame>

Open your browser and follow the link to access your dashboard.

<Frame caption="Figure 8. Warning Page">
  ![Image(4) Pn](/images/image\(4\).png)
</Frame>

You will see a warning from the browser that the certificate is invalid as illustrated in Figure 8. This is normal because we haven’t installed the signed SSL certificate, which is recommended for production. For now, just click proceed.

The first page of Wazuh should be as illustrated in Figure 9.

<Frame caption="Figure 9. Wazuh Login Page">
  ![Image(2) Avi](/images/image\(2\).avif)
</Frame>

Log in using **above mentioned credentials**. After log in, you should see Figure 10.

<Frame caption="Figure 10. Wazuh Dashboard">
  ![Image(5) Pn](/images/image\(5\).png)
</Frame>

Next, open Shuffle dashboard.

Create administrator account using **above mentioned credentials** and then login using the same credentials. After logged in, you should see Figure 11.

<Frame caption="Figure 11. Shuffle Dashboard">
  ![Image(6) Pn](/images/image\(6\).png)
</Frame>

Next, open IRIS dashboard.

Sign in using **above mentioned credentials**. After logged in, you should see Figure 12.

<Frame caption="Figure 12. IRIS Dashboard">
  ![Image(3) Avi](/images/image\(3\).avif)
</Frame>

Next, open MISP dashboard.

Sign in using **above mentioned credentials**. After logged in, you should see Figure 13.

<Frame caption="Figure 13. MISP Dashboard">
  ![Image(7) Pn](/images/image\(7\).png)
</Frame>

### **Credential Summary – T-Guard Modules**

| **Service** | **Web Interface**   | **Username**                                | **Password**          |
| ----------- | ------------------- | ------------------------------------------- | --------------------- |
| Wazuh       | https://\<ip\>      | admin                                       | SecretPassword        |
| DFIR-IRIS   | https://\<ip\>:8443 | administrator                               | MySuperAdminPassword! |
| Shuffle     | http://\<ip\>:3001  |  Create your own                             | Create your own |
| MISP        | https://\<ip\>:1443 | [admin@admin.test](mailto:admin@admin.test) | admin                 |

# Integration Steps

In the **Main Menu**, type ‘**3**’ and press Enter.

The system will prompt you to enter the IRIS API key, as shown in Figure 14.

<Frame caption="Figure 14. Input API KEY">
  ![Iris Wazuh Int Pn](/images/iris-wazuh-int.png)
</Frame>

To obtain it, navigate to the IRIS page, select the Administrator profile, then go to **My Settings**.

<img
  src="/images/iris-wazuh-int2.png"
  alt="Iris Wazuh Int2 Pn"
  title="Iris Wazuh Int2 Pn"
  className="mx-auto"
  style={{ width:"66%" }}
/>

The API key will be displayed.

![Satu Pn](/images/satu.png)

Copy and paste it to the installation, then press **Enter**. Wait until the process is finished.

During the installation process, you will be prompted to enter several integration parameters. Please follow the instructions below carefully.

(Gambar)

# SHUFFLE WEBHOOK URL
Then, you’ll be prompted to enter your Shuffle Webhook URL.

<img
  src="/images/webhook4.png"
  alt="Webhook4 Pn"
  title="Webhook4 Pn"
  style={{ width:"49%" }}
/>

To obtain the URL, follow the instructions below.

- Go to your Shuffle dashboard.
- Select **Workflows**.
- Select **Create Workflow**.
- Specify your preferred **workflow name**—for example, Sample workflow. \> select Create from scratch.
- In the left panel, under the Triggers tab drag the Webhook logo to the middle panel as illustrated below.

GAMBAR 1

GAMBAR

GAMBAR

  ![Webhook Pn](/images/webhook.png)
- Click on **Webhook** module, then it will show up the configuration panel on the right.
  - In the "Webhook URL" parameter, manually copy the URL by **highlighting it until the end of the url**, then press **Ctrl+C**.

![Webhook5 Pn](/images/webhook5.png)

- Paste it to the installation terminal, then press **Enter**. Wait until the process is finished.
- Go back to the Shuffle, click the **Start** button as illustrated below.

![Webhook6 Pn](/images/webhook6.png)

- Next, select the **Shuffle** module in the middle panel, then it will show up the configuration panel on the right.
  - In the "Find Actions" parameter, make sure to select '**Repeat back to me**'.
  - In the "Call" parameter, change the value to `$exec`, then click the **Save** button, as illustrated below.

  ![Webhook7 Pn](/images/webhook7.png)

Click the **Test Execution** button (play icon).

<img
  src="/images/play.png"
  alt="Play Pn"
  title="Play Pn"
  className="mx-auto"
  style={{ width:"20%" }}
/>

Select **Run without Runtime Argument**.

<img
  src="/images/run-anyway.png"
  alt="Run Anyway Pn"
  title="Run Anyway Pn"
  className="mx-auto"
  style={{ width:"80%" }}
/>

Then, you'll see the All Workflow Runs panel on the right side.

![Shuffle Pn](/images/shuffle.png)

Next, on the left panel, select Apps tab, type **IRIS** in the Search Active Apps bar. Just click the **IRIS V2** (not IRIS V2 Fork), and wait until the **IRIS v2** is show up

Then drag it to the middle panel as illustrated below.

![Iris Pn](/images/iris.png)

Click IRIS Module, then fill the following parameters:

- Find Actions: **Add a new case**
- Apikey: (insert your IRIS API Key)
- Url: (your IRIS url)

Choose the Advanced on the right side, and click the Expand Window Button.

![Delapan Pn](/images/delapan.png)

Scroll down to the Body parameter, and click the Expand Window button.

![Iris2 Pn](/images/iris2.png)

Change the body content with the following:

```
{  
{
  "case_customer": 1,
  "case_soc_id": 1,
  "cid": 1,
  "case_name":
"$exec.rule.description",
  "case_description": "Log Level:
$exec.rule.level \n\n Full Log:
$exec.full_log",
  "case_severity_id": 2,
  "case_status_id": 1,
  "ioc": "$exec.data.srcip"
}
}
```

Then, click Try It button on the top right. Wait until the result is show up in the bottom.

![Iris3 Pn](/images/iris3.png)

After that, click **Submit** button on the bottom right.

Then, click **Save** button.

<img
  src="/images/save.png"
  alt="Save Pn"
  title="Save Pn"
  className="mx-auto"
  style={{ width:"20%" }}
/>

Click the **Show Executions** button to open the **All Workflow Runs** panel. You should see alerts from Wazuh listed here.

![Iris Shuffle Pn](/images/iris-shuffle.png)

Then, click on the alerts with the following icon.

<img
  src="/images/alerts.png"
  alt="Alerts Pn"
  title="Alerts Pn"
  className="mx-auto"
  style={{ width:"53%" }}
/>

If there’s nothing available yet, run the Brute-Force Simulation which is explained in Use Case section below in Use Case 1, then come back here.

Then, click **Refresh** button as illustrated below.

<img
  src="/images/sepuluh.png"
  alt="Sepuluh Pn"
  className="mx-auto"
  style={{ width:"47%" }}
/>

It should be exist the IRIS process. Inside the IRIS module, the Status value should be 200, means that the automation of ticket creation is success, as illustrated below.

<img
  src="/images/sebelas.png"
  alt="Sebelas Pn"
  className="mx-auto"
  style={{ width:"52%" }}
/>

We can also check in the IRIS page (**https://\<your_ip\>:8443**), select **Manage Case** tab on the left panel. We can see the ticket created from Shuffle exists.

![Duabelas Avi](/images/duabelas.avif)

# Virus Total API Key
Then, you’ll be prompted to enter your VirusTotal API key.

If you don’t have a VirusTotal account yet, please create one first in following URL:
https://www.virustotal.com/

If you already have an account, log in, click your profile name, and select ‘API Key’ to view it.
Copy and paste it to the installation, then press Enter. Wait until the process is finished.
<img
  src="/images/virustotalapi.png"
  alt="Virustotalapi Pn"
  title="Virustotalapi Pn"
  style={{ width:"68%" }}
/>


# MISP Configuration
You will then be prompted to configure the MISP integration.
MISP Base URL
Example prompt:
```
MISP Base URL (default: https://<SERVER_IP>:1443):
```
If the default value is correct, you can simply press Enter. Otherwise, type your MISP Base URL and press Enter.
Example:
```
https://192.168.0.108:1443
```
MISP API Key
Next step, enter your MISP API Key.
Example prompt:
```
MISP API Key:
```
Copy and paste your MISP API key, then press Enter.
To obtain the MISP API key:
  1. Log in to the MISP web interface
  2. Go to Administration → List Auth Keys
  3. Copy an existing key or create a new one
  4. Paste the key into the installer

(Gambar)


# Wazuh Dashboard URL
Finally, you will be prompted to enter the Wazuh Dashboard URL.
Example prompt:
```
Wazuh Dashboard URL (default: https://<SERVER_IP>):
```
If the default value matches your setup, press Enter.
Otherwise, enter the correct URL and press Enter.
Example:
```
https://192.168.0.108
```
(Gambar)

# Use Case

![Main Menu Pn](/images/main-menu.png)

In the **Main Menu**, type ‘**4**’ and press Enter.

## **Use Case 1: Brute-Force Simulation**

<img
  src="/images/poc.png"
  alt="Poc Pn"
  title="Poc Pn"
  className="mx-auto"
  style={{ width:"55%" }}
/>

In the **PoC Menu**, type ‘**1**’ and press Enter.

![Poc 1 Pn](/images/poc-1.png)

If prompted to continue connecting, type **yes** and press **Enter**.

Multiple login attempts have been recorded in the Wazuh security events, indicating a potential security threat.

![Brute Force Pn](/images/brute-force.png)

These events will be closely monitored and analyzed by the security operations center (SOC) team to determine the source of the attempts and take appropriate action to mitigate any potential risk.

## **Use Case 2: Malware Detection and Auto-Response**

In the **PoC Menu**, type ‘**2**’ and press Enter.

Open your Wazuh page (**https://\<your_ip\>**).

It would be appear an event about VirusTotal detect the malware, the deletion of the file, and the activated response regarding to the malware, illustrated below.

![Zero Avi](/images/zero.avif)

We can also check in the IRIS to see the ticket that automatic created

![One Pn](/images/one.png)

## **Use Case 3: Web Defacement Detection**

In the **PoC Menu**, type ‘**3**’ and press Enter.

Before simulate the web defacement, open the given link (**http://\<your_ip\>:3000**) in your browser. It will direct you to the example website that created by the script.

![Two Pn](/images/two.png)

Then, start the web defacement. It will change the website appearance.

![Three Pn](/images/three.png)

We can see in the Wazuh for the detection of file content changes. The rule id is 550 with the description is Integrity Checksum Changed.

![Four Pn](/images/four.png)
